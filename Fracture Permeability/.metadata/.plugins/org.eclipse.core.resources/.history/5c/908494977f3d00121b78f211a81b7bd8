/*
 * Flow.cpp
 *
 *  Created on: Dec 3, 2012
 *      Author: jqnorris
 */

#include "Flow.h"
#include <cmath>

void flow(Rock & rock, Options & options)
{
	if(rock.damage!=0)
	{
		if(rock.pore1->currentVolume!=rock.pore2->currentVolume)
		{
			float deltaV=(rock.pore1->currentVolume-rock.pore2->currentVolume)/2;
			if(deltaV<0)
			{
				rock.pore1->currentVolume=+deltaV;
				rock.pore2->currentVolume=-deltaV;
			}
			if(deltaV>0)
			{
				rock.pore2->currentVolume=+deltaV;
				rock.pore1->currentVolume=-deltaV;
			}
		}
	}
}

